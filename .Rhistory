deg_stats %>%
filter(stat %in% c("views", "comment_polarity", "p_like", "caption_polarity")) %>%
mutate(stat = case_when(stat == "views" ~ "Views",
stat == "caption_polarity" ~ "Caption Polarity",
stat == "comment_polarity" ~ "Comment Polarity",
stat == "p_like" ~ "Like Fraction")) %>%
ggplot(aes(in_deg, mean, size = count)) +
geom_point(alpha = 0.5) +
facet_wrap(~stat, nrow=2, scales = "free_y") +
xlim(c(0, 40)) +
ylab("Views") +
xlab("In Degree")
deg_stats %>%
filter(stat %in% c("views", "comment_polarity", "p_like", "caption_polarity")) %>%
mutate(stat = case_when(stat == "views" ~ "Views",
stat == "caption_polarity" ~ "Caption Polarity",
stat == "comment_polarity" ~ "Comment Polarity",
stat == "p_like" ~ "Like Fraction"))  -> tst
View(tst)
deg_stats %>%
filter(stat %in% c("views", "comment_polarity", "p_like", "caption_polarity")) %>%
mutate(stat = case_when(stat == "views" ~ "Views",
stat == "caption_polarity" ~ "Caption Polarity",
stat == "comment_polarity" ~ "Comment Polarity",
stat == "p_like" ~ "Like Fraction")) %>%
ggplot(aes(in_deg, mean, size = count)) +
geom_point(alpha = 0.5) +
facet_wrap(~stat, nrow=2, scales = "free_y") +
xlim(c(0, 40)) +
ylab("Views") +
xlab("In Degree")
View(video_info)
View(search_info)
View(search_w_info)
names(search_w_info)
?first
?where
?which
# post date by depth
search_w_info %>%
group_by(search) %>%
mutate(root_date = postdate[which(depth == 0)]) -> tst
View(tst)
# post date by depth
search_w_info %>%
group_by(search) %>%
mutate(root_date = postdate[which(depth == 0)]) %>%
mutate(postdate = postdate - root_date) -> tst
View(tst)
?difftime
# post date by depth
search_w_info %>%
group_by(search) %>%
mutate(root_date = postdate[which(depth == 0)]) %>%
mutate(postdate = difftime(post_date, root_date, units="hours")) -> tst
# post date by depth
search_w_info %>%
group_by(search) %>%
mutate(root_date = postdate[which(depth == 0)]) %>%
mutate(postdate = difftime(postdate, root_date, units="hours")) -> tst
View(tst)
# post date by depth
search_w_info %>%
group_by(search) %>%
mutate(root_date = postdate[which(depth == 0)]) %>%
mutate(time_diff = difftime(postdate, root_date, units="hours")) -> tst
View(tst)
# post date by depth
search_w_info %>%
group_by(search) %>%
mutate(root_date = postdate[which(depth == 0)]) %>%
mutate(time_diff = difftime(postdate, root_date, units="hours")) %>%
select(depth, search, time_diff) -> time_diffs
time_diffs %>%
group_by(depth) %>%
mutate(time_diff = mean(time_diff, na.rm = TRUE)) %>%
ggplot(aes(depth, time_diff)) +
geom_line() +
geom_ribbon(aes(ymin=mean-se, ymax=mean+se), alpha=0.1)
time_diffs %>%
group_by(depth) %>%
mutate(mean = mean(time_diff, na.rm = TRUE),
se = sd(time_diff, na.rm = TRUE) / sqrt(length(time_diff))) %>%
ggplot(aes(depth, time_diff)) +
geom_line() +
geom_ribbon(aes(ymin=mean-se, ymax=mean+se), alpha=0.1)
time_diffs %>%
group_by(depth) %>%
mutate(mean = mean(time_diff, na.rm = TRUE),
se = sd(time_diff, na.rm = TRUE) / sqrt(length(time_diff))) -> tst
View(tst)
# post date by depth
search_w_info %>%
group_by(search) %>%
mutate(root_date = postdate[which(depth == 0)]) %>%
mutate(time_diff = difftime(postdate, root_date, units="hours")) %>%
select(depth, search, time_diff) -> time_diffs
time_diffs %>%
group_by(depth) %>%
mutate(mean = mean(time_diff, na.rm = TRUE),
se = sd(time_diff, na.rm = TRUE) / sqrt(length(time_diff))) -> tst
View(tst)
# post date by depth
search_w_info %>%
group_by(search) %>%
mutate(root_date = postdate[which(depth == 0)]) %>%
mutate(time_diff = difftime(postdate, root_date, units="hours")) %>%
select(depth, search, time_diff) %>%
ungroup() -> time_diffs
time_diffs %>%
group_by(depth) %>%
mutate(mean = mean(time_diff, na.rm = TRUE),
se = sd(time_diff, na.rm = TRUE) / sqrt(length(time_diff))) -> tst
View(tst)
# post date by depth
search_w_info %>%
group_by(search) %>%
mutate(root_date = postdate[which(depth == 0)]) %>%
mutate(time_diff = difftime(postdate, root_date, units="hours")) %>%
ungroup() %>%
select(depth, search, time_diff) -> time_diffs
View(time_diffs)
time_diffs %>%
group_by(depth) %>%
mutate(mean = mean(time_diff, na.rm = TRUE),
se = sd(time_diff, na.rm = TRUE) / sqrt(length(time_diff))) -> tst
View(tst)
str(time_diffs)
time_diffs %>%
group_by(depth) %>%
summarize(mean = mean(time_diff, na.rm = TRUE),
se = sd(time_diff, na.rm = TRUE) / sqrt(length(time_diff))) -> tst
View(tst)
time_diffs %>%
group_by(depth) %>%
summarize(mean = mean(time_diff, na.rm = TRUE),
se = sd(time_diff, na.rm = TRUE) / sqrt(length(time_diff))) %>%
ggplot(aes(depth, time_diff)) +
geom_line()
time_diffs %>%
group_by(depth) %>%
summarize(mean = mean(time_diff, na.rm = TRUE),
se = sd(time_diff, na.rm = TRUE) / sqrt(length(time_diff))) %>%
ggplot(aes(depth, mean)) +
geom_line()
time_diffs %>%
group_by(depth) %>%
summarize(mean = mean(time_diff, na.rm = TRUE),
se = sd(time_diff, na.rm = TRUE) / sqrt(length(time_diff))) %>%
ggplot(aes(depth, mean)) +
geom_line() +
geom_ribbon(aes(ymin=mean-se, ymax=mean+se), alpha=0.1)
# post date by depth
search_w_info %>%
group_by(search) %>%
mutate(root_date = postdate[which(depth == 0)]) %>%
mutate(time_diff = difftime(postdate, root_date, units="days")) %>%
ungroup() %>%
select(depth, search, time_diff) -> time_diffs
time_diffs %>%
group_by(depth) %>%
summarize(mean = mean(time_diff, na.rm = TRUE),
se = sd(time_diff, na.rm = TRUE) / sqrt(length(time_diff))) %>%
ggplot(aes(depth, mean)) +
geom_line() +
geom_ribbon(aes(ymin=mean-se, ymax=mean+se), alpha=0.1)
time_diffs %>%
group_by(depth) %>%
summarize(mean = mean(time_diff, na.rm = TRUE),
se = sd(time_diff, na.rm = TRUE) / sqrt(length(time_diff))) %>%
ggplot(aes(depth, mean)) +
geom_line() +
geom_ribbon(aes(ymin=mean-se, ymax=mean+se), alpha=0.1) +
ylab("Time Difference (days)")
?as.Date
as.Date("2019-03-13", format="%Y-%m-%d")
View(search_w_info)
search_w_info %>%
mutate(video_age = as.Date("2019-03-13", format="%Y-%m-%d") - postdate) -> tst
View(tst)
View(tst)
search_w_info %>%
mutate(video_age = as.Date("2019-03-13", format="%Y-%m-%d") - postdate) %>%
group_by(video_age) %>%
summarise(mean = mean(comment_polarity, na.rm = TRUE),
se = sd(comment_polarity, na.rm = TRUE) / sqrt(length(comment_polarity))) %>%
ungroup() -> tst
View(tst)
?difftime
search_w_info %>%
mutate(video_age = difftime(as.Date("2019-03-13", format="%Y-%m-%d"), postdate, units="days")) %>%
group_by(video_age) %>%
summarise(mean = mean(comment_polarity, na.rm = TRUE),
se = sd(comment_polarity, na.rm = TRUE) / sqrt(length(comment_polarity))) %>%
ungroup() -> tst
View(tst)
?split
?cut
summary(tst$video_age)
max(tst$video_age)
search_w_info %>%
mutate(video_age = int(difftime(as.Date("2019-03-13", format="%Y-%m-%d"), postdate, units="days"))) %>%
group_by(video_age) %>%
summarise(mean = mean(comment_polarity, na.rm = TRUE),
se = sd(comment_polarity, na.rm = TRUE) / sqrt(length(comment_polarity))) -> tst
search_w_info %>%
mutate(video_age = as.numeric(difftime(as.Date("2019-03-13", format="%Y-%m-%d"), postdate, units="days"))) %>%
group_by(video_age) %>%
summarise(mean = mean(comment_polarity, na.rm = TRUE),
se = sd(comment_polarity, na.rm = TRUE) / sqrt(length(comment_polarity))) -> tst
VIew(tst)
View(tst)
search_w_info %>%
mutate(video_age = as.numeric(difftime(as.Date("2019-03-13", format="%Y-%m-%d"), postdate, units="days"))) %>%
group_by(video_age) %>%
summarise(mean = mean(comment_polarity, na.rm = TRUE),
se = sd(comment_polarity, na.rm = TRUE) / sqrt(length(comment_polarity))) -> tst
max(tst$video_age)
min(tst$video_age)
search_w_info %>%
mutate(video_age = as.numeric(difftime(as.Date("2019-03-13", format="%Y-%m-%d"), postdate, units="days"))) %>%
mutate(age_bin = cut(video_age, 10)) -> tst
View(tst)
seq(0, 4500, 10)
search_w_info %>%
mutate(video_age = as.numeric(difftime(as.Date("2019-03-13", format="%Y-%m-%d"), postdate, units="days"))) %>%
mutate(age_bin = cut(video_age, seq(0, 4500, 15))) %>%
group_by(video_age) %>%
summarise(mean = mean(comment_polarity, na.rm = TRUE),
se = sd(comment_polarity, na.rm = TRUE) / sqrt(length(comment_polarity))) -> tst
View(tst)
search_w_info %>%
mutate(video_age = as.numeric(difftime(as.Date("2019-03-13", format="%Y-%m-%d"), postdate, units="days"))) %>%
mutate(age_bin = cut(video_age, seq(0, 4500, 15))) %>%
group_by(age_bin) %>%
summarise(mean = mean(comment_polarity, na.rm = TRUE),
se = sd(comment_polarity, na.rm = TRUE) / sqrt(length(comment_polarity))) -> tst
View(tst)
search_w_info %>%
mutate(video_age = as.numeric(difftime(as.Date("2019-03-13", format="%Y-%m-%d"), postdate, units="days"))) %>%
mutate(age_bin = cut(video_age, seq(0, 4500, 50))) %>%
group_by(age_bin) %>%
summarise(mean = mean(comment_polarity, na.rm = TRUE),
se = sd(comment_polarity, na.rm = TRUE) / sqrt(length(comment_polarity))) -> tst
View(tst)
search_w_info %>%
mutate(video_age = as.numeric(difftime(as.Date("2019-03-13", format="%Y-%m-%d"), postdate, units="days"))) %>%
mutate(age_bin = cut(video_age, seq(0, 4500, 50))) %>%
group_by(age_bin) %>%
summarise(mean = mean(comment_polarity, na.rm = TRUE),
se = sd(comment_polarity, na.rm = TRUE) / sqrt(length(comment_polarity))) %>%
ungroup() %>%
ggplot(aes(age_bin, mean)) +
geom_line()
search_w_info %>%
mutate(video_age = as.numeric(difftime(as.Date("2019-03-13", format="%Y-%m-%d"), postdate, units="days"))) %>%
mutate(age_bin = cut(video_age, seq(0, 4500, 50))) %>%
group_by(age_bin) %>%
summarise(mean = mean(comment_polarity, na.rm = TRUE),
se = sd(comment_polarity, na.rm = TRUE) / sqrt(length(comment_polarity))) %>%
ungroup() -> tst
View(tst)
search_w_info %>%
mutate(video_age = as.numeric(difftime(as.Date("2019-03-13", format="%Y-%m-%d"), postdate, units="days"))) %>%
mutate(age_bin = cut(video_age, seq(0, 4500, 50))) %>%
group_by(age_bin) %>%
summarise(mean = mean(comment_polarity, na.rm = TRUE),
se = sd(comment_polarity, na.rm = TRUE) / sqrt(length(comment_polarity))) %>%
ungroup() %>%
ggplot(aes(age_bin, mean)) +
geom_line()
search_w_info %>%
mutate(video_age = as.numeric(difftime(as.Date("2019-03-13", format="%Y-%m-%d"), postdate, units="days"))) %>%
mutate(age_bin = cut(video_age, seq(0, 4500, 50))) %>%
group_by(age_bin) %>%
summarise(mean = mean(comment_polarity, na.rm = TRUE),
se = sd(comment_polarity, na.rm = TRUE) / sqrt(length(comment_polarity))) %>%
ungroup() %>%
ggplot(aes(age_bin, mean)) +
geom_point()
search_w_info %>%
mutate(video_age = as.numeric(difftime(as.Date("2019-03-13", format="%Y-%m-%d"), postdate, units="days"))) %>%
mutate(age_bin = cut(video_age, seq(0, 4500, 50), labels=FALSE)) %>%
group_by(age_bin) %>%
summarise(mean = mean(comment_polarity, na.rm = TRUE),
se = sd(comment_polarity, na.rm = TRUE) / sqrt(length(comment_polarity))) %>%
ungroup() %>%
ggplot(aes(age_bin, mean)) +
geom_point()
search_w_info %>%
mutate(video_age = as.numeric(difftime(as.Date("2019-03-13", format="%Y-%m-%d"), postdate, units="days"))) %>%
mutate(age_bin = cut(video_age, seq(0, 4500, 50), labels=FALSE)) %>%
group_by(age_bin) %>%
summarise(mean = mean(comment_polarity, na.rm = TRUE),
se = sd(comment_polarity, na.rm = TRUE) / sqrt(length(comment_polarity))) %>%
ungroup() %>%
ggplot(aes(age_bin, mean)) +
geom_point() +
ylab("Comment Polarity")
?scale_x_continuous
search_w_info %>%
mutate(video_age = as.numeric(difftime(as.Date("2019-03-13", format="%Y-%m-%d"), postdate, units="days"))) %>%
mutate(age_bin = cut(video_age, seq(0, 4500, 50), labels=FALSE)) %>%
mutate(age_bin = age_bin * 50) %>%
group_by(age_bin) %>%
summarise(mean = mean(comment_polarity, na.rm = TRUE),
se = sd(comment_polarity, na.rm = TRUE) / sqrt(length(comment_polarity))) %>%
ungroup() %>%
ggplot(aes(age_bin, mean)) +
geom_point() +
ylab("Comment Polarity") +
scale_x_continuous()
search_w_info %>%
mutate(video_age = as.numeric(difftime(as.Date("2019-03-13", format="%Y-%m-%d"), postdate, units="days"))) %>%
mutate(age_bin = cut(video_age, seq(0, 4500, 50), labels=FALSE)) %>%
mutate(age_bin = age_bin * 50) %>%
group_by(age_bin) %>%
summarise(mean = mean(comment_polarity, na.rm = TRUE),
se = sd(comment_polarity, na.rm = TRUE) / sqrt(length(comment_polarity))) %>%
ungroup() %>%
ggplot(aes(age_bin, mean)) +
geom_point() +
ylab("Comment Polarity") +
xlab("Video Age (relative to 03/10/2019)")
search_w_info %>%
mutate(video_age = as.numeric(difftime(as.Date("2019-03-13", format="%Y-%m-%d"), postdate, units="days"))) %>%
mutate(age_bin = cut(video_age, seq(0, 4500, 50), labels=FALSE)) %>%
mutate(age_bin = age_bin * 50) %>%
group_by(age_bin) %>%
summarise(mean = mean(comment_polarity, na.rm = TRUE),
se = sd(comment_polarity, na.rm = TRUE) / sqrt(length(comment_polarity))) %>%
ungroup() %>%
ggplot(aes(age_bin, mean)) +
geom_point() +
ylab("Comment Polarity") +
xlab("Video Age")
search_w_info %>%
mutate(video_age = as.numeric(difftime(as.Date("2019-03-13", format="%Y-%m-%d"), postdate, units="days"))) %>%
mutate(age_bin = cut(video_age, seq(0, 4500, 50), labels=FALSE)) %>%
mutate(age_bin = age_bin * 50) %>%
group_by(age_bin) %>%
summarise(mean = mean(views, na.rm = TRUE),
se = sd(views, na.rm = TRUE) / sqrt(length(views))) %>%
ungroup() %>%
ggplot(aes(age_bin, mean)) +
geom_point() +
ylab("Views") +
xlab("Video Age")
View(deg_stats_long)
# pageranks
prs <- read_csv(here::here('derived_data/pageranks.csv'))
View(prs)
deg_stats_long %>%
left_join(prs, by = 'video_id') -> tst
VView(tst)
View(tst)
deg_stats_long %>%
left_join(prs, by = 'video_id') %>%
ggplot(aes(pagerank, stat)) +
geom_point() +
facet_wrap(~stat, nrow=2, scales = "free_y")
deg_stats_long %>%
filter(stat %in% c("views", "comment_polarity", "p_like", "caption_polarity")) %>%
left_join(prs, by = 'video_id') %>%
ggplot(aes(pagerank, stat)) +
geom_point() +
facet_wrap(~stat, nrow=2, scales = "free_y")
deg_stats_long %>%
filter(stat %in% c("views", "comment_polarity", "p_like", "caption_polarity")) %>%
left_join(prs, by = 'video_id') -> tst
View(tst)
deg_stats_long %>%
filter(stat %in% c("views", "comment_polarity", "p_like", "caption_polarity")) %>%
left_join(prs, by = 'video_id') %>%
ggplot(aes(pagerank, val)) +
geom_point() +
facet_wrap(~stat, nrow=2, scales = "free_y")
?round
deg_stats_long %>%
filter(stat %in% c("views", "comment_polarity", "p_like", "caption_polarity")) %>%
left_join(prs, by = 'video_id') %>%
mutate(pagerank = cut(pagerank, seq(0, 0.005, 0.001))) %>%
ggplot(aes(pagerank, val)) +
geom_point() +
facet_wrap(~stat, nrow=2, scales = "free_y")
deg_stats_long %>%
filter(stat %in% c("views", "comment_polarity", "p_like", "caption_polarity")) %>%
left_join(prs, by = 'video_id') %>%
mutate(pagerank = cut(pagerank, seq(0, 0.005, 0.001))) %>%
group_by(pagerank) %>%
summarise(stat = mean(stat, na.rm = TRUE)) %>%
ggplot(aes(pagerank, val)) +
geom_point() +
facet_wrap(~stat, nrow=2, scales = "free_y")
deg_stats_long %>%
filter(stat %in% c("views", "comment_polarity", "p_like", "caption_polarity")) %>%
left_join(prs, by = 'video_id') %>%
mutate(pagerank = cut(pagerank, seq(0, 0.005, 0.001))) %>%
group_by(pagerank, stat) %>%
summarise(val = mean(val, na.rm = TRUE)) %>%
ggplot(aes(pagerank, val)) +
geom_point() +
facet_wrap(~stat, nrow=2, scales = "free_y")
deg_stats_long %>%
filter(stat %in% c("views", "comment_polarity", "p_like", "caption_polarity")) %>%
left_join(prs, by = 'video_id') %>%
mutate(pagerank = cut(pagerank, seq(0, 0.005, 0.0005))) %>%
group_by(pagerank, stat) %>%
summarise(val = mean(val, na.rm = TRUE)) %>%
ggplot(aes(pagerank, val)) +
geom_point() +
facet_wrap(~stat, nrow=2, scales = "free_y")
?cut
deg_stats_long %>%
filter(stat %in% c("views", "comment_polarity", "p_like", "caption_polarity")) %>%
left_join(prs, by = 'video_id') %>%
mutate(pagerank = cut(pagerank, seq(0, 0.005, 0.0005), labels = FALSE) * 0.0005) %>%
group_by(pagerank, stat) %>%
summarise(val = mean(val, na.rm = TRUE)) %>%
ggplot(aes(pagerank, val)) +
geom_point() +
facet_wrap(~stat, nrow=2, scales = "free_y")
deg_stats_long %>%
filter(stat %in% c("views", "comment_polarity", "p_like", "caption_polarity")) %>%
left_join(prs, by = 'video_id') %>%
mutate(pagerank = cut(pagerank, seq(0, 0.005, 0.0005), labels = FALSE) * 0.0005) %>%
group_by(pagerank, stat) %>%
summarise(val = mean(val, na.rm = TRUE),
n = n()) %>%
ggplot(aes(pagerank, val, size = n)) +
geom_point() +
facet_wrap(~stat, nrow=2, scales = "free_y")
deg_stats_long %>%
filter(stat %in% c("views", "comment_polarity", "p_like", "caption_polarity")) %>%
left_join(prs, by = 'video_id') %>%
mutate(pagerank = cut(pagerank, seq(0, 0.005, 0.0005), labels = FALSE) * 0.0005) %>%
group_by(pagerank, stat) %>%
summarise(val = mean(val, na.rm = TRUE),
n = n()) %>%
ggplot(aes(pagerank, val, size = n)) +
geom_point(alpha=0.7) +
facet_wrap(~stat, nrow=2, scales = "free_y")
deg_stats_long %>%
filter(stat %in% c("views", "comment_polarity", "p_like", "caption_polarity")) %>%
left_join(prs, by = 'video_id') %>%
mutate(pagerank = cut(pagerank, seq(0, 0.005, 0.0005), labels = FALSE) * 0.0005) %>%
group_by(pagerank, stat) %>%
summarise(val = mean(val, na.rm = TRUE),
n = n()) %>%
ggplot(aes(pagerank, val, size = n)) +
geom_point(alpha=0.7) +
facet_wrap(~stat, nrow=2, scales = "free_y") +
xlab("PageRank") +
ylab("Mean")
deg_stats_long %>%
filter(stat %in% c("views", "comment_polarity", "p_like", "caption_polarity")) %>%
left_join(prs, by = 'video_id') %>%
mutate(pagerank = cut(pagerank, seq(0, 0.005, 0.0005), labels = FALSE) * 0.0005) %>%
group_by(pagerank, stat) %>%
summarise(val = mean(val, na.rm = TRUE),
n = n()) %>%
ggplot(aes(pagerank, val, size = n)) +
geom_point(alpha=0.7) +
facet_wrap(~stat, nrow=2, scales = "free_y") +
xlab("PageRank") +
ylab("Mean")
View(video_info %>% filter(views == 0))
time_diffs %>%
group_by(depth) %>%
summarize(mean = mean(time_diff, na.rm = TRUE),
se = sd(time_diff, na.rm = TRUE) / sqrt(length(time_diff))) %>%
ggplot(aes(depth, mean)) +
geom_line() +
geom_ribbon(aes(ymin=mean-se, ymax=mean+se), alpha=0.1) +
ylab("Time Difference (days)")
degrees %>%
select(video_id, in_deg) %>%
top_n(8, in_deg) %>%
arrange(-in_deg) %>%
left_join(video_info %>% select(video_id, title, channel, category), by = "video_id") %>%
left_join(category_crosswalk, by = c('category' = 'category_id')) %>%
select(-category) %>%
kable(format = "latex",
caption = "Top Videos by In-Degree",
col.names = c("Video", "In-Degree", "Title", "Channel", "Category"),
booktabs = TRUE,
digits = 2) %>%
kable_styling(latex_options = c("HOLD_position", "striped"))
degrees %>%
select(video_id, in_deg) %>%
top_n(8, in_deg) %>%
arrange(-in_deg) %>%
left_join(video_info %>% select(video_id, title, channel, category), by = "video_id") %>%
left_join(category_crosswalk, by = c('category' = 'category_id')) %>%
select(-category) %>%
kable(format = "latex",
caption = "Top Videos by In-Degree",
col.names = c("Video", "In-Degree", "Title", "Channel", "Category"),
booktabs = TRUE,
digits = 2) %>%
kable_styling(latex_options = c("scale_down"))
degrees %>%
select(video_id, in_deg) %>%
top_n(8, in_deg) %>%
arrange(-in_deg) %>%
left_join(video_info %>% select(video_id, title, channel), by = "video_id") %>%
kable(format = "latex",
caption = "Top Videos by In-Degree",
col.names = c("Video", "In-Degree", "Title", "Channel"),
booktabs = TRUE,
digits = 2) %>%
kable_styling(latex_options = c("scale_down"))
